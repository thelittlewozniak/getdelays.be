@using GetDelaysAPI;
@{
    ViewBag.Title = "Profile";
    User u = (User)Session["user"];
}

<h1>Profile</h1>
<h3>Your informations</h3>
<table class="table table-hover">
    <tr>
        <th scope="row">Name</th>
        <td>@u.name</td>
    </tr>
    <tr>
        <th scope="row">Firstname</th>
        <td>@u.surname</td>
    </tr>
    <tr>
        <th scope="row">Email</th>
        <td>@u.email</td>
    </tr>
    <tr>
        <th scope="row">Phone Number</th>
        <td>@u.phoneNumber</td>
    </tr>
</table>
<h3>Followed Stations</h3>
@if (u.followedStations != null && u.followedStations.Count >= 1)
{
    <table class="table table-hover">
        <thead>
            <tr>
                <th scope="col">Station Name:</th>
                <th scope="col">Edits:</th>
            </tr>
        </thead>
        <tbody>
            @foreach (FollowedStation fs in u.followedStations)
            {
                <tr class="table-active">
                    <td> @Html.ActionLink(fs.stationName, "GetStationsByName", "Station", routeValues: new { station = fs.stationName }, htmlAttributes: null)</td>
                    <td>@Html.ActionLink("Delete", "DeleteFollowStationProfile", "Station", routeValues: new { station = fs.stationName }, htmlAttributes: null)</td>
                </tr>
            }

        </tbody>
    </table>
}
<h3>Followed Connections</h3>
@if (u.followedConnections != null && u.followedConnections.Count >= 1)
{
    <table class="table table-hover">
        <thead>
            <tr>
                <td scope="col">Departure Station</td>
                <td scope="col">Arrival Station</td>
                <td scope="col">Time</td>
                <td scope="col">Edits</td>
            </tr>
        </thead>
        @foreach (FollowedConnection fc in u.followedConnections)
        {
            <tr class="table-active">
                <td> @Html.ActionLink(fc.departure, "GetStationsByName", "Station", routeValues: new { station = fc.departure }, htmlAttributes: null)</td>
                <td> @Html.ActionLink(fc.arrival, "GetStationsByName", "Station", routeValues: new { station = fc.arrival }, htmlAttributes: null)</td>
                <td> @fc.DateTime</td>
                <td><button type="button" class="btn btn-primary" onclick="window.location.href = '/Connection/GetConnectionTime?arr=@fc.arrival&dep=@fc.departure&time=@fc.DateTime';">Details</button></td>
                <td> @Html.ActionLink("Delete", "DeleteFollowConnectionProfile", "Connection", routeValues: new { ConnectionId = fc.Id }, htmlAttributes: null)</td>
            </tr>
        }
    </table>
}
<p>@Html.ActionLink("Edit Your Information", "MakeChangeInformation", "User")</p>
<p>@Html.ActionLink("Delete Your Profile", "DeleteUser", "User")</p>

